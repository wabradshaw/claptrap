<!DOCTYPE html>
<html>
    <head>
		<link rel="stylesheet" type="text/css" href="css/site.css" />
        <link rel="stylesheet" type="text/css" href="font-awesome/css/font-awesome.min.css" /> 
		
        <script src="js/ext/jquery-3.1.1.min.js"></script>
		<script src="js/ext/knockout-3.4.2.js"></script>
		<script src="js/ext/AvsAn-simple.js"></script>
		
		<script src="js/claptrap.js"></script>		
        <title>Claptrap</title>
    </head>
	<body>
		<div id="banner">
			<a>How it Works</a>
			<a>Contact us</a>
		</div>
		<div id="main-window">
			<div id="title">
				<img id="main-title" src="img/claptrap.svg" alt="Claptrap"/>
				<div id="slogan">The Crap Joke Generation App</div>
			</div>
			<div id="content-window">
				<div id="intro" data-bind="ifnot: currentJoke">
					<div id="intro-card" class="card">
						<p>
							Claptrap is an AI that makes up its own jokes. It looks for words that sound alike or mean similar things and links them together into puns. They'll probably be terrible. Sorry.
						</p>
						<p>
							Rate the jokes to help Claptrap learn what's funny and what isn't. Or what doesn't make any sense at all. You can even help Claptrap improve by teaching it how words relate to one another.
						</p>
					</div>
					<div class="button focal-button" role="button" tabindex="0" data-bind="click: generateJoke, event: {keypress: generateJoke}">Generate a Joke</div>
				</div>
				<!-- ko with: currentJoke -->
				<div id="joke" class="ko-start-hidden" data-bind="if: $root.mode() == 'Joke', css: {'ko-start-hidden': false}">
					<div id="setup" class="card" data-bind="text: setup"></div>
					<div id="punchline" class="card" data-bind="text: punchline"></div> 
					<div class="button focal-button" role="button" tabindex="0" data-bind="click: $root.generateJoke, event: {keypress: $root.generateJoke}">Generate another</div>
					<div id="rating-buttons">
						<div id="good-rating" class="button icon-button" role="button" tabindex="0" data-bind="click: toggleGood, event: {keypress: toggleGood}, css: { toggled: vote() == 1 }"><i class="fa fa-2x fa-thumbs-up fa-flip-horizontal"></i></div>
						<div id="bad-rating" class="button icon-button" role="button" tabindex="0" data-bind="click: toggleBad, event: {keypress: toggleBad}, css: { toggled: vote() == -1 }"><i class="fa fa-2x fa-thumbs-down"></i></div>
						<div id="explain-button" class="button small-text-button" role="button" tabindex="0" data-bind="click: $root.showExplanation, event: {keypress: $root.showExplanation}">Explain</div>
						<div id="improve-button" class="button small-text-button" role="button" tabindex="0" data-bind="click: $root.showImprove, event: {keypress: $root.showImprove}">Improve</div>
					</div>					
				</div>
				<div id="explanation-view" class="ko-start-hidden" data-bind="if: $root.mode() == 'Explanation', css: {'ko-start-hidden': false}">
					<div id="explanation-descriptor" class="background-info">Claptrap thinks that:</div>
					<div id="explanation-list" data-bind="foreach: relationships">
						<div class="explanation">
							<div class="card" data-bind="text: descriptor"></div>
							<div class="button icon-button" role="button" tabindex="0" data-bind="click: toggleRelationship, event: {keypress: toggleRelationship}, css: { toggled: wrong }"><i class="fa fa-2x fa-times"></i></div>
						</div>						
					</div>					
					<div id="back-button" class="button focal-button" role="button" tabindex="0" data-bind="click: $root.showJoke, event: {keypress: $root.showJoke}">Back</div>		
				</div>
				<!-- /ko -->
				<!-- ko with: suggestedJoke -->
				<div id="improvement-view" class="ko-start-hidden" data-bind="if: $root.mode() == 'Improve', css: {'ko-start-hidden': false}">
					<div id="improvement-list">
						<div class="improvement">
							<div class="card" data-bind="text: detNucleus"></div>
							<select class="card editable" data-bind="options: primaryOptions, optionsText: 'descriptor', value: primaryLink"></select>
							<input type="text" class="card editable" data-bind="value: primarySetup"/>
						</div>						
						<div class="improvement">
							<div class="card" data-bind="text: detLinguisticReplacement"></div>
							<select class="card editable" data-bind="options: secondaryOptions, optionsText: 'descriptor', value: secondaryLink"></select>
							<input type="text" class="card editable" data-bind="value: secondarySetup"/>
						</div>						
					</div>
					<div id="regenerate-button" class="button focal-button" role="button" tabindex="0" data-bind="click: $root.regenerateJoke, event: {keypress: $root.regenerateJoke}">Try It</div>				
					<div class="small-joke">
						<div class="card" data-bind="text: $root.currentJoke().setup"></div>
						<div class="card" data-bind="text: $root.currentJoke().punchline"></div>
					</div>
					<div id="improvement-buttons">
						<div id="cancel-button" class="button split-button" role="button" tabindex="0" data-bind="click: $root.showJoke, event: {keypress: $root.showJoke}">Cancel</div>
						<div id="submit-button" class="button split-button" role="button" tabindex="0" data-bind="click: $root.submitJoke, event: {keypress: $root.submitJoke}">Submit</div>
					</div>						
				</div>
				<!-- /ko -->
			</div>
		</div>
		<div id="footer"></div>
	</body>
</html>